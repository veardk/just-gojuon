(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[474],{5077:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(4297);let r=(0,s.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},320:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(4297);let r=(0,s.Z)("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]])},713:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(4297);let r=(0,s.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},2148:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/practice/dictation",function(){return a(7302)}])},7302:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return dictation}});var s=a(5893);a(7294);var r=a(9008),i=a.n(r),n=a(1163),l=a(9556),o=a(5274),c=a(4148),d=a(4752),m=a(4848),u=a(5817),x=a(5231),h=a(4489),g=a(6886),learning_CategorySelector=e=>{let{selectedCategories:t,onCategoryChange:a,multiple:r=!0,className:i,...n}=e,o=(0,l.ZK)(),handleCategoryClick=e=>{if(r){let s=t.includes(e);s?t.length>1&&a(t.filter(t=>t!==e)):a([...t,e])}else a([e])},getCategoryColor=e=>{let t={[x.B.SEION]:"bg-japanese-hiragana text-white",[x.B.DAKUON]:"bg-japanese-katakana text-white",[x.B.HANDAKUON]:"bg-japanese-romaji text-white",[x.B.YOON]:"bg-japanese-accent text-white"};return t[e]},getCategoryCount=e=>{var t;return(null===(t=g.IC[e])||void 0===t?void 0:t.length)||0};return(0,s.jsxs)("div",{className:(0,h.cn)("space-y-3",i),...n,children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"zh"===o?"选择练习内容":"Select Practice Content"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.values(x.B).map(e=>{let a=t.includes(e),r=g.Hs[e][o],i=getCategoryCount(e);return(0,s.jsxs)("div",{className:(0,h.cn)("relative p-4 rounded-card border-2 cursor-pointer transition-all duration-200","hover:shadow-card hover:-translate-y-0.5",a?"border-primary-500 bg-primary-50 shadow-card":"border-gray-200 bg-white hover:border-gray-300"),onClick:()=>handleCategoryClick(e),children:[(0,s.jsx)("div",{className:"absolute top-2 right-2",children:(0,s.jsx)("div",{className:(0,h.cn)("w-5 h-5 rounded-full border-2 flex items-center justify-center",a?"border-primary-500 bg-primary-500":"border-gray-300"),children:a&&(0,s.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("span",{className:(0,h.cn)("inline-block px-2 py-1 rounded-full text-xs font-medium",getCategoryColor(e)),children:e.toUpperCase()})}),(0,s.jsx)("h4",{className:"font-medium text-text-primary mb-1",children:r}),(0,s.jsxs)("p",{className:"text-sm text-text-secondary",children:[i," ","zh"===o?"个字符":"characters"]})]},e)})}),r&&(0,s.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,s.jsx)(m.Z,{variant:"outline",size:"sm",onClick:()=>a(Object.values(x.B)),children:"zh"===o?"全选":"Select All"}),(0,s.jsx)(m.Z,{variant:"ghost",size:"sm",onClick:()=>a([x.B.SEION]),children:"zh"===o?"重置":"Reset"})]})]})},p=a(320),y=a(713),j=a(5077),v=a(4297);let f=(0,v.Z)("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),N=(0,v.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),b=(0,v.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var dictation=()=>{let e=(0,n.useRouter)(),t=(0,l.ZK)(),a=(0,o.NT)(),{updateConfig:r,updateAudioSettings:x,startDictation:h}=(0,o.Uf)(),handleDurationChange=e=>{r({duration:e})},handleAudioSettingChange=(e,t)=>{x({[e]:t})};return(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"zh"===t?"五十音听写练习 - Just Gojuon":"Dictation Practice - Just Gojuon"}),(0,s.jsx)("meta",{name:"description",content:"Configure your Japanese kana dictation practice session"})]}),(0,s.jsx)(d.Z,{className:"py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-japanese-hiragana rounded-2xl mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z"})})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-4 font-display",children:"zh"===t?"五十音听写练习":"Kana Dictation Practice"}),(0,s.jsx)("p",{className:"text-text-secondary max-w-2xl mx-auto",children:"zh"===t?"根据音频播放，在纸上写下听到的假名字符。音频会自动连续播放，每个音频重复3遍。":"Listen to audio and write down the kana characters on paper. Audio will play continuously with 3 repetitions each."})]}),(0,s.jsx)(u.Z,{className:"mb-8 bg-gradient-to-r from-primary-50 to-japanese-accent/10 border-primary-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"zh"===t?"使用说明":"Instructions"}),(0,s.jsxs)("div",{className:"text-text-secondary space-y-3 max-w-3xl mx-auto text-left",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-primary-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{children:"zh"===t?"准备纸笔，听到音频后写下对应的假名字符或罗马音":"Prepare paper and pen, write down the corresponding kana or romaji when you hear the audio"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 text-primary-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{children:"zh"===t?"每个音频会连续播放指定次数，然后自动播放下一个":"Each audio will play the specified number of times, then automatically play the next one"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5 text-primary-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{children:"zh"===t?"练习时间到达后会自动停止，您可以随时暂停或停止练习":"Practice will stop automatically when time is up, you can pause or stop anytime"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(f,{className:"w-5 h-5 text-primary-500 mt-0.5 flex-shrink-0"}),(0,s.jsx)("p",{children:"zh"===t?"可以调节音量、播放速度和间隔时间以适应您的学习节奏":"Adjust volume, playback speed and interval time to match your learning pace"})]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,s.jsxs)(u.Z,{className:"h-fit",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)(N,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary",children:"zh"===t?"选择假名分类":"Select Kana Categories"})]}),(0,s.jsx)(learning_CategorySelector,{selectedCategories:a.selectedCategories,onCategoryChange:e=>{r({selectedCategories:e})},multiple:!0})]}),(0,s.jsxs)(u.Z,{className:"h-fit",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary",children:"zh"===t?"练习时间":"Practice Duration"})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[1,3,5,10,15,30,60].map(e=>(0,s.jsxs)("button",{onClick:()=>handleDurationChange(e),className:"p-4 rounded-xl border-2 text-center transition-all duration-200 hover:scale-105 ".concat(a.duration===e?"border-primary-500 bg-primary-50 text-primary-700 shadow-md":"border-gray-200 hover:border-primary-300 hover:bg-gray-50 text-text-secondary"),children:[(0,s.jsx)("div",{className:"font-bold text-xl",children:e}),(0,s.jsx)("div",{className:"text-xs font-medium mt-1",children:"zh"===t?"分钟":"min"})]},e))})]})]}),(0,s.jsxs)(u.Z,{className:"bg-gradient-to-r from-gray-50 to-primary-50/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)(f,{className:"w-5 h-5 text-primary-500"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary",children:"zh"===t?"音频设置":"Audio Settings"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(f,{className:"w-4 h-4 text-primary-500"}),(0,s.jsx)("label",{className:"text-sm font-medium text-text-primary",children:"zh"===t?"音量":"Volume"})]}),(0,s.jsx)("div",{className:"text-center mb-3",children:(0,s.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[Math.round(100*a.audioSettings.volume),"%"]})}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:a.audioSettings.volume,onChange:e=>handleAudioSettingChange("volume",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer hover:bg-gray-300 transition-colors"})]}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(b,{className:"w-4 h-4 text-primary-500"}),(0,s.jsx)("label",{className:"text-sm font-medium text-text-primary",children:"zh"===t?"播放速度":"Speed"})]}),(0,s.jsx)("div",{className:"text-center mb-3",children:(0,s.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[a.audioSettings.playbackRate,"x"]})}),(0,s.jsx)("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:a.audioSettings.playbackRate,onChange:e=>handleAudioSettingChange("playbackRate",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer hover:bg-gray-300 transition-colors"})]}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 text-primary-500"}),(0,s.jsx)("label",{className:"text-sm font-medium text-text-primary",children:"zh"===t?"音频间隔":"Interval"})]}),(0,s.jsx)("div",{className:"text-center mb-3",children:(0,s.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[a.audioSettings.intervalTime,"s"]})}),(0,s.jsx)("input",{type:"range",min:"1",max:"10",step:"0.5",value:a.audioSettings.intervalTime,onChange:e=>handleAudioSettingChange("intervalTime",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer hover:bg-gray-300 transition-colors"})]}),(0,s.jsxs)("div",{className:"p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 text-primary-500"}),(0,s.jsx)("label",{className:"text-sm font-medium text-text-primary",children:"zh"===t?"重复次数":"Repeats"})]}),(0,s.jsx)("div",{className:"text-center mb-3",children:(0,s.jsx)("span",{className:"text-lg font-bold text-primary-600",children:a.audioSettings.repeatCount})}),(0,s.jsx)("input",{type:"range",min:"1",max:"5",step:"1",value:a.audioSettings.repeatCount,onChange:e=>handleAudioSettingChange("repeatCount",parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer hover:bg-gray-300 transition-colors"})]})]})]}),(0,s.jsxs)("div",{className:"text-center mt-8",children:[0===a.selectedCategories.length&&(0,s.jsx)("div",{className:"text-sm text-semantic-warning mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-3 max-w-md mx-auto",children:"zh"===t?"请至少选择一个假名分类。":"Please select at least one kana category."}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)(m.Z,{variant:"primary",size:"lg",onClick:()=>{h(),e.push("/practice/dictation/session")},disabled:0===a.selectedCategories.length,className:"bg-primary-600 hover:bg-primary-700 text-white px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:[(0,s.jsx)(b,{className:"w-6 h-6 mr-3"}),"zh"===t?"开始听写练习":"Start Dictation"]}),(0,s.jsx)(m.Z,{variant:"outline",size:"lg",onClick:()=>e.push("/"),className:"px-8 py-4 text-lg font-semibold rounded-xl border-2 border-gray-300 text-gray-600 hover:bg-gray-50 transition-all duration-200",children:"zh"===t?"返回首页":"Back to Home"})]})]})]})})]})}},5274:function(e,t,a){"use strict";a.d(t,{Gq:function(){return useDictationStats},NT:function(){return useDictationConfig},Uf:function(){return m},m:function(){return useDictationState},o9:function(){return useCurrentAudioItem}});var s=a(4529),r=a(782),i=a(5231),n=a(8421),l=a(4920);let o={selectedCategories:[i.B.SEION],duration:5,audioSettings:{volume:.8,playbackRate:1,intervalTime:2,repeatCount:3}},c={isActive:!1,isPaused:!1,currentAudioIndex:0,totalAudios:0,remainingTime:0,playedCount:0,currentRepeat:0},d={totalPlayed:0,sessionDuration:0,categoriesUsed:[],startTime:new Date,playedAudios:[]},m=(0,s.Ue)()((0,r.tJ)((e,t)=>({config:o,state:c,stats:d,playlist:[],currentItem:null,updateConfig:t=>{e(e=>({config:{...e.config,...t}}))},updateAudioSettings:t=>{e(e=>({config:{...e.config,audioSettings:{...e.config.audioSettings,...t}}}))},generatePlaylist:()=>{let{config:a}=t(),s=a.selectedCategories.flatMap(e=>(0,l.uY)(e)),r=(0,l.Sy)(s).map((e,t)=>({id:"audio-".concat(t),kanaId:e.id,audioUrl:(0,l.pm)(e),category:e.category,hiragana:e.hiragana,katakana:e.katakana,romaji:e.romaji}));e({playlist:r,state:{...t().state,totalAudios:r.length,currentAudioIndex:0},currentItem:r[0]||null})},startDictation:()=>{let{config:a}=t();t().generatePlaylist(),e({state:{...c,isActive:!0,remainingTime:60*a.duration,totalAudios:t().playlist.length},stats:{...d,startTime:new Date,categoriesUsed:a.selectedCategories,playedAudios:[]}})},pauseDictation:()=>{e(e=>({state:{...e.state,isPaused:!0}}))},resumeDictation:()=>{e(e=>({state:{...e.state,isPaused:!1}}))},stopDictation:()=>{let a=t().stats,s=a.startTime,r=new Date,i=Math.floor((r.getTime()-s.getTime())/1e3);e({state:c,stats:{...a,endTime:r,sessionDuration:i},currentItem:null})},nextAudio:()=>{let{state:a,playlist:s}=t(),r=a.currentAudioIndex+1;if(console.log("nextAudio called, current index:",a.currentAudioIndex,"next index:",r,"playlist length:",s.length),r<s.length){var i;console.log("Moving to next audio:",null===(i=s[r])||void 0===i?void 0:i.romaji),e({state:{...a,currentAudioIndex:r,playedCount:a.playedCount+1,currentRepeat:0},currentItem:s[r]||null})}else{console.log("All audios completed, stopping dictation");let a=t().stats,s=a.startTime,r=new Date,i=Math.floor((r.getTime()-s.getTime())/1e3);e({state:{...t().state,isActive:!1,remainingTime:0},stats:{...a,endTime:r,sessionDuration:i}})}},previousAudio:()=>{let{state:a,playlist:s}=t(),r=a.currentAudioIndex>0?a.currentAudioIndex-1:s.length-1;e({state:{...a,currentAudioIndex:r,currentRepeat:0},currentItem:s[r]||null})},updateTimer:()=>{let{state:a}=t();a.isActive&&!a.isPaused&&a.remainingTime>0&&(e(e=>({state:{...e.state,remainingTime:e.state.remainingTime-1}})),a.remainingTime<=1&&t().stopDictation())},resetConfig:()=>{e({config:o})},recordAudioPlayed:(t,a)=>{let s={kanaId:t.kanaId,hiragana:t.hiragana,katakana:t.katakana,romaji:t.romaji,category:t.category,playedAt:new Date,repeatCount:a};e(e=>({stats:{...e.stats,totalPlayed:e.stats.totalPlayed+1,playedAudios:[...e.stats.playedAudios,s]}}))},updateCurrentRepeat:t=>{e(e=>({state:{...e.state,currentRepeat:t}}))},resetStats:()=>{e({stats:d})}}),{name:n.I.USER_SETTINGS+"-dictation",partialize:e=>({config:e.config,stats:e.stats})})),useDictationConfig=()=>m(e=>e.config),useDictationState=()=>m(e=>e.state),useDictationStats=()=>m(e=>e.stats),useCurrentAudioItem=()=>m(e=>e.currentItem)},4920:function(e,t,a){"use strict";a.d(t,{LN:function(){return getKanaCategoryColor},OA:function(){return getKanaDisplayText},Sy:function(){return shuffleArray},pm:function(){return getKanaAudioUrl},uY:function(){return getKanaByCategory}});var s=a(5231),r=a(6886);let getKanaByCategory=e=>e?r.IC[e]||[]:r.q,shuffleArray=e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t},getKanaDisplayText=(e,t)=>t===s.k.HIRAGANA?e.hiragana:e.katakana,getKanaCategoryColor=e=>{let t={[s.B.SEION]:"text-japanese-hiragana",[s.B.DAKUON]:"text-japanese-katakana",[s.B.HANDAKUON]:"text-japanese-romaji",[s.B.YOON]:"text-japanese-accent"};return t[e]||"text-gray-600"},getKanaAudioUrl=e=>{let t={[s.B.SEION]:"seion",[s.B.DAKUON]:"dakuon",[s.B.HANDAKUON]:"handakuon",[s.B.YOON]:"yoon"},a=t[e.category];return"/sounds/".concat(a,"/").concat(e.romaji,".mp3")}}},function(e){e.O(0,[372,886,774,888,179],function(){return e(e.s=2148)}),_N_E=e.O()}]);